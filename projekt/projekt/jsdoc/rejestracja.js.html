<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: rejestracja.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: rejestracja.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Klasa reprezentująca użytkownika.
 * @class
 */
class User {
  /**
   * Konstruktor klasy User, inicjalizuje pola użytkownika.
   */
  constructor() {
    this.imie = "";
    this.nazwisko = "";
    this.telefon = "";
    this.email = "";
    this.login = "";
    this.haslo = "";
    this.ofertyEmail = false;
    this.ofertySMS = false;
    this.miasto = "";
    this.ulica = "";
    this.numerDomu = "";
  }

  /**
   * Metoda zwracająca informacje o użytkowniku jako tekst.
   * @returns {string} Informacje o użytkowniku jako tekst.
   */
  getInfoAsString() {
    return `Imię: ${this.imie}\nNazwisko: ${this.nazwisko}\nLogin: ${this.login}\nHasło: ${this.haslo}\nTelefon: ${this.telefon}\nEmail: ${this.email}\nOtrzymywanie ofert na email: ${this.ofertyEmail}\nOtrzymywanie ofert na SMS: ${this.ofertySMS}\nMiasto: ${this.miasto}\nUlica: ${this.ulica}\nNumer domu: ${this.numerDomu}`;
  }

  /**
   * Metoda zapisująca dane użytkownika do pamięci lokalnej przeglądarki.
   */
  saveToLocalStorage() {
    localStorage.setItem("userData", JSON.stringify(this));
  }

  /**
   * Metoda statyczna wczytująca dane użytkownika z pamięci lokalnej przeglądarki.
   * @returns {User} Obiekt użytkownika wczytany z pamięci lokalnej lub nowy obiekt User, jeśli dane nie są dostępne.
   */
  static loadFromLocalStorage() {
    const userData = localStorage.getItem("userData");
    if (userData) {
      const user = JSON.parse(userData);
      const newUser = new User();
      Object.assign(newUser, user);
      return newUser;
    }
    return new User();
  }

  /**
   * Metoda inicjalizująca formularz rejestracyjny i obsługująca jego zdarzenia.
   */
  initializeForm() {
    var form = document.getElementById("myForm");
    var newUser = User.loadFromLocalStorage();

    var nameInput = document.getElementById("name");
    var surnameInput = document.getElementById("nazwisko");
    var telInput = document.getElementById("tel");
    var mailInput = document.getElementById("mail");
    var loginInput = document.getElementById("login");
    var hasloInput = document.getElementById("haslo");
    var ofertyEmailInput = document.getElementById("ofertyEmail");
    var ofertySMSInput = document.getElementById("ofertySMS");
    var miastoInput = document.getElementById("contact-topic");
    var ulicaInput = document.getElementById("ulica");
    var numerDomuInput = document.getElementById("numerDomu");

    nameInput.value = newUser.imie;
    surnameInput.value = newUser.nazwisko;
    telInput.value = newUser.telefon;
    mailInput.value = newUser.email;
    loginInput.value = newUser.login;
    hasloInput.value = newUser.haslo;
    ofertyEmailInput.checked = newUser.ofertyEmail;
    ofertySMSInput.checked = newUser.ofertySMS;
    miastoInput.value = newUser.miasto;
    ulicaInput.value = newUser.ulica;
    numerDomuInput.value = newUser.numerDomu;

    form.addEventListener("submit", function (event) {
      newUser.imie = nameInput.value.trim();
      newUser.nazwisko = surnameInput.value.trim();
      newUser.telefon = telInput.value.trim();
      newUser.email = mailInput.value.trim();
      newUser.login = loginInput.value.trim();
      newUser.haslo = hasloInput.value.trim();
      newUser.ofertyEmail = ofertyEmailInput.checked;
      newUser.ofertySMS = ofertySMSInput.checked;
      newUser.miasto = miastoInput.value;
      newUser.ulica = ulicaInput.value.trim();
      newUser.numerDomu = numerDomuInput.value.trim();

      var namePattern = /^[a-zA-ZąćęłńóśźżĄĆĘŁŃÓŚŹŻ]+$/u;
      var telPattern = /^[0-9]{9,15}$/;
      var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
      var loginPattern = /^[a-zA-Z0-9]+$/u;
      var ulicaPattern = /^[a-zA-Z0-9]{3,}$/u;
      var numerDomuPattern = /^[1-9]\d*$/;

      if (!namePattern.test(newUser.imie)) {
        alert("Imię może zawierać tylko litery alfabetu.");
        event.preventDefault();
        return;
      }

      if (!namePattern.test(newUser.nazwisko)) {
        alert("Nazwisko może zawierać tylko litery alfabetu.");
        event.preventDefault();
        return;
      }

      if (!telPattern.test(newUser.telefon) || parseInt(newUser.telefon) &lt; 0) {
        alert("Podaj poprawny numer telefonu.");
        event.preventDefault();
        return;
      }

      if (!emailPattern.test(newUser.email)) {
        alert("Podaj poprawny adres email.");
        event.preventDefault();
        return;
      }

      if (!loginPattern.test(newUser.login)) {
        alert("Login może zawierać tylko litery i cyfry.");
        event.preventDefault();
        return;
      }

      if (newUser.haslo.length &lt; 8) {
        alert("Hasło musi zawierać co najmniej 8 znaków.");
        event.preventDefault();
        return;
      }

      if (!ulicaPattern.test(newUser.ulica)) {
        alert("Nazwa ulicy musi zawierać co najmniej 3 litery i może zawierać cyfry.");
        event.preventDefault();
        return;
      }

      if (!numerDomuPattern.test(newUser.numerDomu) || parseInt(newUser.numerDomu) &lt;= 0) {
        alert("Numer domu musi być liczbą większą od zera.");
        event.preventDefault();
        return;
      }

      // Czyszczenie pól formularza po udanej rejestracji
      nameInput.value = "";
      surnameInput.value = "";
      telInput.value = "";
      mailInput.value = "";
      loginInput.value = "";
      hasloInput.value = "";
      ofertyEmailInput.checked = false;
      ofertySMSInput.checked = false;
      miastoInput.value = "";
      ulicaInput.value = "";
      numerDomuInput.value = "";

      // Zapisanie danych do lokalnego magazynu
      newUser.saveToLocalStorage();
      alert("Rejestracja udana!\n\n" + newUser.getInfoAsString());
    });
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="User.html">User</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addItem">addItem</a></li><li><a href="global.html#handleKeyPress">handleKeyPress</a></li><li><a href="global.html#initializeSlider">initializeSlider</a></li><li><a href="global.html#loadShoppingList">loadShoppingList</a></li><li><a href="global.html#removeItem">removeItem</a></li><li><a href="global.html#saveShoppingList">saveShoppingList</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sat Feb 03 2024 16:35:09 GMT+0100 (czas środkowoeuropejski standardowy)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
